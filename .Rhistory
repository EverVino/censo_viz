renv.status()
renv::status()
renv::snapshot()
renv.status()
renv::status()
renv::restore()
install.packages("renv")
renv::restore()
library("dplyr")
library("haven")
renv::restore()
library("dplyr")
library("haven")
data <- read_sav("data/raw/Censo1976/BOL_POB_1976_.sav")
head(data)
unique(as_factor(data$p03))
unique(as_factor(data$p04))
colnames(data)
str(data)
install.packages("ggplot2")
install.packages("readr")
renv::snapshot()
renv::status()
installed.packages()
renv::dependencies()
renv::lockfile_read()
library("ggplot2")
library("readr")
data <- read_csv("data/processed/poblacion_genero_bolivia.csv")
head(data)
poblacion_total <- sum(data$total)
poblacion_total
poblacion_total_lp <- sum(poblacion_lp$total)
poblacion_total_lp
poblacion_lp <- data %>% filter(dep==2)
poblacion_total_lp <- sum(poblacion_lp$total)
poblacion_total_lp
ggplot(poblacion_lp,
aes(x = poblacion_lp$rango_edad,
y = ifelse(poblacion_lp$genero == 1, -poblacion_lp$total, poblacion_lp$total),
fill = poblacion_lp$genero)) +
geom_bar(data = subset(data, poblacion_lp$genero == 2), stat = "identity") +
geom_bar(data = subset(data, poblacion_lp$genero == 1), stat = "identity") +
scale_y_continuous(labels = abs)
ggplot(poblacion_lp,
aes(x = poblacion_lp$rango_edad,
y = ifelse(poblacion_lp$genero == 1, -poblacion_lp$total, poblacion_lp$total),
fill = poblacion_lp$genero)) +
geom_bar(data = subset(poblacion_lp, poblacion_lp$genero == 2), stat = "identity") +
geom_bar(data = subset(poblacion_lp, poblacion_lp$genero == 1), stat = "identity") +
scale_y_continuous(labels = abs)
ggplot(poblacion_lp,
aes(x = poblacion_lp$rango_edad,
y = ifelse(poblacion_lp$genero == 1, -poblacion_lp$total, poblacion_lp$total),
fill = poblacion_lp$genero)) +
geom_bar(poblacion_lp = subset(poblacion_lp, poblacion_lp$genero == 2), stat = "identity") +
geom_bar(poblacion_lp = subset(poblacion_lp, poblacion_lp$genero == 1), stat = "identity") +
scale_y_continuous(labels = abs)
ggplot(poblacion_lp,
aes(x = poblacion_lp$rango_edad,
y = ifelse(poblacion_lp$genero == 1, -poblacion_lp$total, poblacion_lp$total),
fill = poblacion_lp$genero)) +
geom_bar(poblacion_lp = subset(poblacion_lp, poblacion_lp$genero == "2"), stat = "identity") +
geom_bar(poblacion_lp = subset(poblacion_lp, poblacion_lp$genero == "1"), stat = "identity") +
scale_y_continuous(labels = abs)
ggplot(poblacion_lp,
aes(x = poblacion_lp$rango_edad,
y = ifelse(poblacion_lp$genero == 1, -poblacion_lp$total, poblacion_lp$total),
fill = poblacion_lp$genero)) +
#geom_bar(poblacion_lp = subset(poblacion_lp, poblacion_lp$genero == "2"), stat = "identity") +
#geom_bar(poblacion_lp = subset(poblacion_lp, poblacion_lp$genero == "1"), stat = "identity") +
scale_y_continuous(labels = abs)
ggplot(poblacion_lp,
aes(x = poblacion_lp$rango_edad,
y = ifelse(poblacion_lp$genero == 1, -poblacion_lp$total, poblacion_lp$total),
fill = poblacion_lp$genero)) +
geom_bar(poblacion_lp = subset(poblacion_lp, poblacion_lp$genero == "2"), stat = "identity") +
geom_bar(poblacion_lp = subset(poblacion_lp, poblacion_lp$genero == "1"), stat = "identity") +
scale_y_continuous(labels = abs)
ggplot(poblacion_lp,
aes(x = poblacion_lp$rango_edad,
y = ifelse(poblacion_lp$genero == 1, -poblacion_lp$total, poblacion_lp$total),
fill = poblacion_lp$genero)) +
geom_bar(poblacion_lp = subset(poblacion_lp, poblacion_lp$genero == 2), stat = "identity") +
geom_bar(poblacion_lp = subset(poblacion_lp, poblacion_lp$genero == 1), stat = "identity") +
scale_y_continuous(labels = abs)
ggplot(poblacion_lp,
aes(x = poblacion_lp$rango_edad,
y = ifelse(poblacion_lp$genero == 1, -poblacion_lp$total, poblacion_lp$total),
fill = poblacion_lp$genero)) +
geom_bar(data = subset(poblacion_lp, poblacion_lp$genero == 2), stat = "identity") +
geom_bar(data = subset(poblacion_lp, poblacion_lp$genero == 1), stat = "identity") +
scale_y_continuous(labels = abs)
View(data)
View(data)
View(data)
View(data)
View(data)
View(data)
View(data)
View(data)
View(data)
rm(data)
df <- read_csv("data/processed/poblacion_genero_bolivia.csv")
head(df)
poblacion_total <- sum(df$total)
poblacion_total
poblacion_lp <- df %>% filter(dep==2)
poblacion_total_lp <- sum(poblacion_lp$total)
poblacion_total_lp
ggplot(poblacion_lp,
aes(x = poblacion_lp$rango_edad,
y = ifelse(poblacion_lp$genero == 1, -poblacion_lp$total, poblacion_lp$total),
fill = poblacion_lp$genero)) +
geom_bar(data = subset(poblacion_lp, poblacion_lp$genero == 2), stat = "identity") +
geom_bar(data = subset(poblacion_lp, poblacion_lp$genero == 1), stat = "identity") +
scale_y_continuous(labels = abs)
coord_flip() +
labs(title = "Piramide poblacional - La Paz (1976)", y = "Poblacion", x ="Rango de Edad", fill="Genero") +
theme_minimal()
ggplot(poblacion_lp,
aes(x = rango_edad,
y = ifelse(genero == 1, -total, total),
fill = factor(genero)
)
) +
geom_col() +
scale_y_continuous(labels = abs) +
coord_flip() +
labs(title = "Piramide poblacional - La Paz (1976)", y = "Poblacion", x ="Rango de Edad", fill="Genero") +
theme_minimal()
data <- read_sav("data/raw/Censo1976/BOL_POB_1976_.sav")
resultados <- list()
library("dplyr")
library("haven")
data <- read_sav("data/raw/Censo1976/BOL_POB_1976_.sav")
resultados <- list()
for (dep_id in 1:9) {
to_write <- data %>%
filter(dep == dep_id) %>%
group_by(p03, p04) %>%
summarize(cantidad = n(), .groups = "drop") %>%
mutate(
rango_edad = ifelse(
p04 >= 80,
"80+",
paste0(
floor(p04/5)*5,
"-",
floor(p04/5)*5 + 4
)
)
) %>%
rename(genero = p03) %>%
group_by(rango_edad, genero) %>%
summarize(total = sum(cantidad), .groups = "drop") %>%
mutate(dep = dep_id) %>%
mutate(rango_edad = factor(
rango_edad,
levels = rango_edad[order(as.integer(sub("-.*","",rango_edad)))]
))
resultados[[dep_id]] <- to_write
}
to_write <- data %>%
filter(dep == dep_id) %>%
group_by(p03, p04) %>%
summarize(cantidad = n(), .groups = "drop") %>%
mutate(
rango_edad = ifelse(
p04 >= 80,
"80+",
paste0(
floor(p04/5)*5,
"-",
floor(p04/5)*5 + 4
)
)
) %>%
rename(genero = p03) %>%
group_by(rango_edad, genero) %>%
summarize(total = sum(cantidad), .groups = "drop") %>%
mutate(dep = dep_id) %>%
mutate(
rango_edad = factor(
rango_edad,
levels = rango_edad[order(as.integer(sub("-.*", "", rango_edad)))]
))
rlang::last_trace()
library("dplyr")
library("ggplot2")
library("readr")
df <- read_csv("data/processed/poblacion_genero_bolivia.csv")
head(df)
poblacion_lp <- df %>% filter(dep==2)
poblacion_total_lp <- sum(poblacion_lp$total)
poblacion_total_lp
head(poblacion_lp)
